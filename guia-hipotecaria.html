<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NVH5B947');</script>
    <!-- End Google Tag Manager -->
<head>    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía Hipotecaria Completa | Prestamigo</title>
    <style>
        /* [All original CSS preserved] */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            line-height: 1.6;
        }
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px 0;
            position: relative;
        }
        .logo {
            height: 90px;
            width: auto;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-links {
            display: flex;
            list-style: none;
            align-items: center;
        }
        .nav-links li {
            margin-left: 20px;
        }
        .nav-links li a {
            text-decoration: none;
            color: #2c3e50;
            font-weight: 600;
        }
        .language-toggle {
            display: flex;
            margin-left: 20px;
            border: 1px solid #3498db;
            border-radius: 20px;
            overflow: hidden;
        }
        .language-toggle a {
            padding: 5px 15px;
            text-decoration: none;
            color: #3498db;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .language-toggle a.active {
            background-color: #3498db;
            color: white;
        }
        
        /* Dropdown Menu Styles */
        .dropdown {
            position: relative;
        }
        .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .dropdown-toggle i {
            font-size: 0.8rem;
            transition: transform 0.3s ease;
        }
        .dropdown:hover .dropdown-toggle i {
            transform: rotate(180deg);
        }
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: #ffffff;
            border: 2px solid #333333;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            min-width: 250px;
            padding: 8px 0;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 9999;
            display: none;
        }
        .dropdown:hover .dropdown-menu,
        .dropdown.active .dropdown-menu {
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateY(0) !important;
            display: block !important;
        }
        .dropdown-menu li {
            margin: 0;
        }
        .dropdown-menu a {
            display: block;
            padding: 10px 20px;
            color: #2c3e50;
            font-weight: 400;
            transition: background-color 0.2s ease;
            text-decoration: none;
        }
        .dropdown-menu a:hover {
            background-color: #f8f9fa;
            color: #3498db;
        }
        .dropdown-header {
            padding: 8px 20px 4px;
            font-size: 0.85rem;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .dropdown-divider {
            height: 1px;
            background-color: #e0e0e0;
            margin: 8px 0;
        }
        
        /* Hamburger Menu */
        .hamburger {
            display: none;
            cursor: pointer;
            width: 30px;
            height: 20px;
            flex-direction: column;
            justify-content: space-between;
        }
        .hamburger span {
            display: block;
            width: 100%;
            height: 3px;
            background-color: #2c3e50;
            transition: all 0.3s ease;
        }
        
        /* Mobile Navigation */
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }
            .nav-links {
                position: fixed;
                top: 90px;
                left: 0;
                width: 100%;
                background-color: #fff;
                flex-direction: column;
                align-items: center;
                padding: 20px 0;
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
                transform: translateY(-150%);
                transition: transform 0.3s ease;
                z-index: 100;
            }
            .nav-links.active {
                transform: translateY(0);
            }
            .nav-links li {
                margin: 10px 0;
                width: 100%;
                text-align: center;
            }
            .language-toggle {
                margin: 15px auto 0;
                justify-content: center;
            }
            .hamburger.active span:nth-child(1) {
                transform: translateY(8px) rotate(45deg);
            }
            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }
            .hamburger.active span:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }
        }
        .guide-hero {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
            padding: 60px 0;
            text-align: center;
        }
        .guide-hero h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        .guide-hero p {
            font-size: 1.2rem;
            color: #7f8c8d;
            max-width: 700px;
            margin: 0 auto 30px;
        }
        .guide-content {
            padding: 60px 0;
            background-color: #fff;
        }
        .guide-section {
            margin-bottom: 50px;
        }
        .guide-section h2 {
            color: #3498db;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f5f9;
        }
        .guide-section h3 {
            color: #2c3e50;
            font-size: 1.4rem;
            margin: 30px 0 15px;
        }
        .guide-card {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .guide-card h4 {
            color: #3498db;
            margin-top: 0;
        }
        ul.guide-list {
            padding-left: 20px;
        }
        ul.guide-list li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 15px;
        }
        ul.guide-list li:before {
            content: "•";
            color: #3498db;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        /* Calculator Styles */
        .calculator-container {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        .calculator-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Poppins', sans-serif;
        }
        .form-control:focus {
            outline: none;
            border-color: #3498db;
        }
        #calculate-btn {
            width: 100%;
            margin: 20px 0;
            padding: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        #calculate-btn:hover {
            background: #2980b9;
        }
        #calculator-results {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        #calculator-results hr {
            margin: 15px 0;
            border-color: #eee;
        }
        .download-section {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 60px 0;
            text-align: center;
        }
        .download-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.1);
        }
        .download-button {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 15px 30px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: background-color 0.3s;
            margin-top: 20px;
        }
        .download-button:hover {
            background-color: #2980b9;
        }
        footer {
            background-color: #2c3e50;
            color: white;
            padding: 30px 0;
            text-align: center;
            font-size: 0.9rem;
        }
        .disclaimer {
            max-width: 800px;
            margin: 0 auto;
            font-size: 0.8rem;
            color: #bdc3c7;
            line-height: 1.5;
        }
        @media (max-width: 768px) {
            .guide-hero h1 {
                font-size: 2rem;
            }
            .guide-section h2 {
                font-size: 1.5rem;
            }
            .calculator-form {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NVH5B947"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="/">
                    <img src="https://i.imgur.com/t3pRlvV.png" alt="Prestamigo Logo" class="logo">
                </a>
                
                <!-- Hamburger Menu Button -->
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <ul class="nav-links">
                    <li><a href="/">Inicio</a></li>
                    <li><a href="/guia-hipotecaria.html">Guía Hipotecaria</a></li>
                    <li><a href="/calculadora.html">Calculadora</a></li>
                    <li><a href="/calculadora-poder-de-compra.html">Poder de Compra</a></li>
                    <li><a href="/comprar-vs-rentar">¿Comprar o Rentar?</a></li>
                    <li><a href="/tasas-de-interes.html">Tasas de Interés</a></li>
                    <li><a href="#" onclick="openBookingModal(); return false;">Contacto</a></li>
                    <li>
                        <div class="language-toggle">
                            <a href="#" class="active">ES</a>
                            <a href="#">EN</a>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero -->
    <section class="guide-hero">
        <div class="container">
            <h1>Guía Hipotecaria Completa</h1>
            <p>Todo lo que necesitas saber para navegar el proceso de compra de vivienda en español, desde pre-calificación hasta el cierre.</p>
        </div>
    </section>

    <!-- Guide Content -->
    <section class="guide-content">
        <div class="container">
            <!-- Original Loan Types Section -->
            <div class="guide-section">
                <h2><i class="fas fa-home"></i> Tipos de Préstamos Hipotecarios</h2>
                <div class="guide-card">
                    <h4>1. Préstamos Convencionales</h4>
                    <ul class="guide-list">
                        <li><strong>Enganche mínimo:</strong> 3-5% (primeros compradores pueden calificar al 3%)</li>
                        <li><strong>Requisitos de crédito:</strong> Puntaje FICO 620+</li>
                        <li><strong>Ventajas:</strong> Sin seguro hipotecario con 20% de enganche, plazos flexibles</li>
                    </ul>
                </div>
                <div class="guide-card">
                    <h4>2. Préstamos FHA</h4>
                    <ul class="guide-list">
                        <li><strong>Enganche mínimo:</strong> 3.5%</li>
                        <li><strong>Requisitos de crédito:</strong> Puntaje FICO 580+ (500-579 con 10% de enganche)</li>
                        <li><strong>Ventajas:</strong> Acepta deudas más altas y créditos imperfectos</li>
                        <li><strong>Seguro hipotecario:</strong> Requerido durante toda la vida del préstamo</li>
                    </ul>
                </div>
                <div class="guide-card">
                    <h4>3. Préstamos VA</h4>
                    <ul class="guide-list">
                        <li><strong>Enganche mínimo:</strong> 0%</li>
                        <li><strong>Requisitos:</strong> Servicio militar activo o veteranos elegibles</li>
                        <li><strong>Ventajas:</strong> Sin seguro hipotecario, tasas competitivas</li>
                        <li><strong>Tarifa de financiamiento:</strong> 1.25-3.3% del préstamo</li>
                    </ul>
                </div>
            </div>

            <!-- Documentation Section -->
            <div class="guide-section">
                <h2><i class="fas fa-file-signature"></i> Documentación Requerida</h2>
                <h3>Para Empleados Tradicionales</h3>
                <ul class="guide-list">
                    <li>Identificación oficial (licencia, pasaporte, matrícula consular)</li>
                    <li>W-2 de los últimos 2 años</li>
                    <li>Talones de pago de los últimos 30 días</li>
                    <li>Estados de cuenta bancarios de los últimos 2 meses</li>
                </ul>
                <h3>Para Trabajadores Independientes</h3>
                <ul class="guide-list">
                    <li>Declaraciones de impuestos (1040) de los últimos 2 años con todos los anexos</li>
                    <li>Estados de cuenta bancarios de los últimos 12-24 meses</li>
                    <li>Facturas y contratos de clientes principales</li>
                </ul>
                <h3>Para Residentes con ITIN</h3>
                <ul class="guide-list">
                    <li>Comprobante de ITIN vigente</li>
                    <li>Historial crediticio alternativo (pagos de renta, servicios)</li>
                    <li>Cartas de referencia de empleador o clientes</li>
                </ul>
            </div>

            <!-- Affordability Section -->
            <div class="guide-section">
                <h2><i class="fas fa-calculator"></i> Cómo Calcular tu Poder de Compra</h2>
                <div class="guide-card">
                    <h4>Fórmula Básica</h4>
                    <p><strong>Pago mensual máximo = Ingreso bruto mensual × 43% - Deudas mensuales</strong></p>
                    <p>Ejemplo: $5,000 ingreso × 0.43 = $2,150 - $300 (deudas) = $1,850 pago máximo</p>
                </div>
                <div class="guide-card">
                    <h4>Calculadora de Hipoteca</h4>
                    <p>Usa nuestra fórmula para estimar tu pago mensual:</p>
                    <p><strong>Pago = [P×(r(1+r)^n)]/[(1+r)^n-1]</strong></p>
                    <ul class="guide-list">
                        <li>P = Monto principal del préstamo</li>
                        <li>r = Tasa de interés mensual (tasa anual ÷ 12)</li>
                        <li>n = Número de pagos (años × 12)</li>
                    </ul>
                </div>
                <div class="guide-card">
                    <h4>Costos Adicionales a Considerar</h4>
                    <ul class="guide-list">
                        <li>Impuestos sobre la propiedad (1-2% del valor anual)</li>
                        <li>Seguro de vivienda ($800-$2,000 anual)</li>
                        <li>Mantenimiento (1% del valor de la casa anual)</li>
                    </ul>
                </div>

                <!-- Quick Link to Calculator -->
                <div class="guide-card" style="text-align: center; border-left: 4px solid #3498db;">
                    <p><strong>¿Quieres calcular tus números exactos?</strong></p>
                    <a href="#calculadora" class="download-button" style="display: inline-block; margin: 10px;">
                        Ir a la Calculadora
                    </a>
                </div>
            </div>

            <!-- Integrated Calculator -->
            <div class="guide-section" id="calculadora">
                <h2><i class="fas fa-calculator"></i> Calculadora de Hipotecas</h2>
                <div class="calculator-container">
                    <div class="calculator-form">
                        <div>
                            <div class="form-group">
                                <label for="loan-amount">Monto del préstamo ($)</label>
                                <input type="number" id="loan-amount" class="form-control" placeholder="Ej: 250000">
                            </div>
                            <div class="form-group">
                                <label for="interest-rate">Tasa de interés (%)</label>
                                <input type="number" step="0.01" id="interest-rate" class="form-control" placeholder="Ej: 3.5">
                            </div>
                            <div class="form-group">
                                <label for="loan-term">Plazo del préstamo (años)</label>
                                <select id="loan-term" class="form-control">
                                    <option value="15">15 años</option>
                                    <option value="30" selected>30 años</option>
                                    <option value="10">10 años</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label for="down-payment">Enganche ($)</label>
                                <input type="number" id="down-payment" class="form-control" placeholder="Ej: 50000">
                            </div>
                            <div class="form-group">
                                <label for="property-tax">Impuestos anuales ($)</label>
                                <input type="number" id="property-tax" class="form-control" placeholder="Opcional">
                            </div>
                            <div class="form-group">
                                <label for="insurance">Seguro anual ($)</label>
                                <input type="number" id="insurance" class="form-control" placeholder="Opcional">
                            </div>
                        </div>
                    </div>
                    <button id="calculate-btn" class="cta-button">
                        Calcular Pago Mensual
                    </button>
                    <div id="calculator-results">
                        <h4 style="color: #2c3e50; margin-top: 0;">Resultados:</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <p><strong>Pago Principal + Interés:</strong></p>
                                <p><strong>Impuestos:</strong></p>
                                <p><strong>Seguro:</strong></p>
                            </div>
                            <div style="text-align: right;">
                                <p id="principal-interest">$0.00</p>
                                <p id="tax-amount">$0.00</p>
                                <p id="insurance-amount">$0.00</p>
                            </div>
                        </div>
                        <hr>
                        <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold;">
                            <p>Pago Mensual Total:</p>
                            <p id="monthly-payment" style="color: #3498db;">$0.00</p>
                        </div>
                    </div>
                </div>
                <div class="guide-card">
                    <h4>¿Cómo interpretar los resultados?</h4>
                    <ul class="guide-list">
                        <li><strong>Principal + Interés:</strong> La base de tu pago hipotecario</li>
                        <li><strong>Impuestos:</strong> Varían según ubicación (1-2% del valor anual)</li>
                        <li><strong>Seguro:</strong> Incluye seguro de vivienda y posiblemente PMI</li>
                    </ul>
                </div>
            </div>

            <!-- First-Time Buyers Section -->
            <div class="guide-section">
                <h2><i class="fas fa-lightbulb"></i> Consejos para Primeros Compradores</h2>
                <div class="guide-card">
                    <h4>Antes de Buscar Casa</h4>
                    <ul class="guide-list">
                        <li>Revisa tu crédito y corrige errores (40% de reports tienen errores)</li>
                        <li>Ahorra al menos 3.5% para enganche + 2-5% para costos de cierre</li>
                        <li>Consigue una carta de pre-aprobación para negociar mejor</li>
                    </ul>
                </div>
                <div class="guide-card">
                    <h4>Durante la Búsqueda</h4>
                    <ul class="guide-list">
                        <li>Considera ubicaciones con buena plusvalía pero accesibles</li>
                        <li>Visita propiedades en diferentes días y horarios</li>
                        <li>Calcula costos totales, no solo el precio de venta</li>
                    </ul>
                </div>
                <div class="guide-card">
                    <h4>Proceso de Cierre</h4>
                    <ul class="guide-list">
                        <li>Revisa el "Closing Disclosure" 3 días antes de firmar</li>
                        <li>Compara con el "Loan Estimate" inicial</li>
                        <li>Prepara transferencia bancaria para fondos de cierre</li>
                    </ul>
                </div>
            </div>

            <!-- [All other original sections...] -->

            <!-- Download Section -->
            <section class="download-section">
                <div class="container">
                    <div class="download-card">
                        <h2>Descarga la Guía Definitiva (PDF + Hojas de Cálculo)</h2>
                        <p>Incluye todo lo anterior más:</p>
                        <ul class="guide-list" style="text-align: left; max-width: 500px; margin: 20px auto;">
                            <li>Calculadora de Poder de Compra (Excel)</li>
                            <li>Checklist de Documentos por Tipo de Préstamo</li>
                            <li>Plantilla para Disputar Errores de Crédito</li>
                            <li>Lista de Prestamistas que Aceptan ITIN por Estado</li>
                        </ul>
                        <a href="https://drive.google.com/uc?export=download&id=1W71CTu3y-Nql6a4LmRgVtuop_5MG-7Pz" 
                           class="download-button" 
                           download="Guia-Hipotecaria-Prestamigo.pdf">
                           Descargar Kit Completo <i class="fas fa-download"></i>
                        </a>
                        <p><small>Al descargar, aceptas recibir emails educativos de Prestamigo. Puedes darte de baja cuando quieras.</small></p>
                    </div>
                </div>
            </section>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="disclaimer">
                <p>INCITE LLC, DBA Prestamigo, es una empresa de educación. INCITE LLC, DBA Prestamigo no es un prestamista, no emite calificaciones de préstamos, y no extiende crédito de ningún tipo. Este sitio web es sólo para uso educativo. Todos los cálculos deben ser verificados de forma independiente. Este sitio web no es una oferta de préstamo y no debe utilizarse directamente para tomar decisiones sobre ofertas de viviendas, decisiones de compra ni selecciones de préstamos. No se garantiza que proporcione resultados exactos, que implique condiciones de préstamo, importes de calificación ni asesoramiento inmobiliario. Busque el consejo de un agente de bienes raíces con licencia, originador de préstamos, planificador financiero, contador y/o abogado de bienes raíces, legal y/o asesoramiento financiero.</p>
                
                <p><strong>Divulgación de Relación Comercial:</strong><br>
                INCITE LLC, DBA Prestamigo, tiene una relación comercial con Loan Factory, Inc. (NMLS 320841), una empresa de originación hipotecaria con licencia. Si usted solicita ser contactado o solicita más información, su información puede ser compartida con Loan Factory, Inc. o con otros profesionales hipotecarios con licencia para brindarle asistencia adicional. INCITE LLC, DBA Prestamigo, puede recibir compensación si usted elige trabajar con Loan Factory, Inc. u otros socios recomendados.</p>
                
                <p><strong>Transparencia:</strong><br>
                El contenido educativo proporcionado en este sitio puede no ser completamente imparcial debido a la relación comercial entre INCITE LLC, DBA Prestamigo, y Loan Factory, Inc.</p>
                
                <p>INCITE LLC, DBA Prestamigo, no está afiliada a la VA, la FHA ni a ninguna otra agencia gubernamental. Este sitio no ha sido aprobado por ninguna agencia gubernamental.</p>
                
                <p>Para más información sobre cómo manejamos sus datos personales, consulte nuestra <a href="/politica-de-privacidad.html" style="color: #3498db; text-decoration: underline;">Política de Privacidad</a> y <a href="/terminos-de-servicio.html" style="color: #3498db; text-decoration: underline;">Términos de Servicio</a>.</p>
                
                <p>NMLS 1940106<br>
                Loan Factory, Inc.<br>
                NMLS 320841</p>
                
                <p>Igualdad de Vivienda Prestamista</p>
                
                <p><strong>Sin citas en persona</strong></p>
            </div>
            <p>&copy; 2024 Prestamigo. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Mortgage Calculator
        document.getElementById('calculate-btn').addEventListener('click', function() {
            const loanAmount = parseFloat(document.getElementById('loan-amount').value);
            const interestRate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12;
            const loanTerm = parseInt(document.getElementById('loan-term').value) * 12;
            const downPayment = parseFloat(document.getElementById('down-payment').value) || 0;
            const propertyTax = parseFloat(document.getElementById('property-tax').value) || 0;
            const insurance = parseFloat(document.getElementById('insurance').value) || 0;
            
            if (isNaN(loanAmount) || isNaN(interestRate)) {
                alert("Por favor ingresa el monto del préstamo y la tasa de interés");
                return;
            }
            
            const principal = loanAmount - downPayment;
            const x = Math.pow(1 + interestRate, loanTerm);
            const monthlyPI = principal * interestRate * x / (x - 1);
            const monthlyTax = propertyTax / 12;
            const monthlyInsurance = insurance / 12;
            const totalPayment = monthlyPI + monthlyTax + monthlyInsurance;
            
            document.getElementById('principal-interest').textContent = '$' + monthlyPI.toFixed(2);
            document.getElementById('tax-amount').textContent = '$' + monthlyTax.toFixed(2);
            document.getElementById('insurance-amount').textContent = '$' + monthlyInsurance.toFixed(2);
            document.getElementById('monthly-payment').textContent = '$' + totalPayment.toFixed(2);
            document.getElementById('calculator-results').style.display = 'block';
        });

        // Auto-focus calculator when linked
        if(window.location.hash === '#calculadora') {
            setTimeout(() => {
                document.getElementById('loan-amount').focus();
            }, 500);
        }
        
        // Hamburger Menu for Mobile Navigation
        const hamburger = document.querySelector('.hamburger');
        const navLinks = document.querySelector('.nav-links');
        
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });
        
        // Close menu when clicking on a link (for mobile)
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });
        
        // Language Toggle
        document.querySelectorAll('.language-toggle a').forEach(toggle => {
            toggle.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector('.language-toggle a.active').classList.remove('active');
                toggle.classList.add('active');
            });
        });
    </script>
    
    <!-- Floating Contact Button -->
    <div style="position: fixed; bottom: 30px; right: 30px; z-index: 9999; animation: pulse 2s infinite;">
        <button onclick="openBookingModal()" 
           style="display: inline-block; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 15px 25px; border-radius: 50px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4); transition: all 0.3s ease; border: 2px solid transparent; cursor: pointer;"
           onmouseover="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 10px 30px rgba(52, 152, 219, 0.6)'; this.style.background='linear-gradient(135deg, #2980b9, #3498db)'; this.style.border='2px solid #fff';"
           onmouseout="this.style.transform=''; this.style.boxShadow='0 6px 20px rgba(52, 152, 219, 0.4)'; this.style.background='linear-gradient(135deg, #3498db, #2980b9)'; this.style.border='2px solid transparent';">
            📅 Agendar Consulta
        </button>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 10000; overflow-y: auto;">
        <div style="position: relative; margin: 2% auto; padding: 0; width: 95%; max-width: 700px; background: white; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); min-height: 600px;">
            <button onclick="closeBookingModal()" style="position: absolute; top: 15px; right: 20px; background: #ff4757; color: white; border: none; font-size: 18px; cursor: pointer; border-radius: 50%; width: 35px; height: 35px; z-index: 10001; display: flex; align-items: center; justify-content: center;">&times;</button>
            <div id="bookingContent" style="padding: 50px 20px 20px 20px; height: 650px;">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        function openBookingModal() {
            event.preventDefault();
            event.stopPropagation();
            
            const modal = document.getElementById('bookingModal');
            const content = document.getElementById('bookingContent');
            
            // Show modal
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Load Go High Level widget content
            content.innerHTML = `
                <iframe src="https://api.leadconnectorhq.com/widget/booking/qBoIcTx0Mr1zIeWeWD9D" 
                        style="width: 100%; height: 100%; border: none; border-radius: 10px;" 
                        frameborder="0" 
                        scrolling="auto"
                        allowfullscreen>
                </iframe>
            `;
            
            return false;
        }
        
        function closeBookingModal() {
            const modal = document.getElementById('bookingModal');
            const content = document.getElementById('bookingContent');
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Clear content to stop any ongoing processes
            content.innerHTML = '<div style="text-align: center; padding: 50px;">Cargando...</div>';
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('bookingModal');
            const modalContent = modal.querySelector('div');
            
            if (event.target === modal) {
                closeBookingModal();
            }
        });
        
        // Prevent event bubbling inside modal
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('bookingModal');
            if (modal) {
                modal.querySelector('div').addEventListener('click', function(event) {
                    event.stopPropagation();
                });
            }
        });
    </script>
    <script src="https://link.msgsndr.com/js/form_embed.js" type="text/javascript"></script>
    <script src="js/tracking.js"></script>

    <style>
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @media (max-width: 768px) {
            div[style*="position: fixed"] {
                bottom: 20px !important;
                right: 20px !important;
            }
            
            div[style*="position: fixed"] a {
                padding: 12px 20px !important;
                font-size: 14px !important;
            }
        }
    </style>
</body>
</html>
